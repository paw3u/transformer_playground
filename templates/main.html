<!DOCTYPE html>
<html>
<head>
<title>Transformer autocomplete playground</title>
<style type="text/css">
    kbd {
        display: inline-block;
        padding: 3px 5px;
        font-size: 11px;
        line-height: 10px;
        color: #444d56;
        vertical-align: text-bottom;
        background-color: #fafbfc;
        border: solid 1px #c6cbd1;
        border-bottom-color: rgb(198, 203, 209);
        border-bottom-color: #959da5;
        border-radius: 3px;
        box-shadow: inset 0 -1px 0 #959da5;
    }
</style>
</head>
<body>

<div align="center">
<p>Trigger autocomplete <kbd>tab</kbd> | Select suggestion <kbd>↑</kbd> <kbd>↓</kbd> and <kbd>enter</kbd> | Cancel suggestion <kbd>esc</kbd></p>
<textarea name="text" id="prompt" style="width:600px; height:400px;">
The cat was playing in the garden.
</textarea><br>
<input type="text" id="choice0" value="Choice 0" style="width:600px; border:0px;" readonly><br>
<input type="text" id="choice1" value="Choice 1" style="width:600px; border:0px;" readonly><br>
<input type="text" id="choice2" value="Choice 2" style="width:600px; border:0px;" readonly><br>
</div>

<script type="text/javascript">
    choice_mode = 0;
    choice_index = -1;
    choice0 = document.getElementById("choice0");
    choice1 = document.getElementById("choice1");
    choice2 = document.getElementById("choice2");

    function choice_select(index){
        choice_index = index
        if(choice_index == 0) choice0.style.backgroundColor = "LightGray"; else choice0.style.backgroundColor = "White";
        if(choice_index == 1) choice1.style.backgroundColor = "LightGray"; else choice1.style.backgroundColor = "White";
        if(choice_index == 2) choice2.style.backgroundColor = "LightGray"; else choice2.style.backgroundColor = "White";
    }

    function choice_text(){
        if(choice_index == 0) return choice0.value;
        if(choice_index == 1) return choice1.value;
        if(choice_index == 2) return choice2.value;
    }

    function choice_clear(){
        choice0.value = "";
        choice1.value = "";
        choice2.value = "";
    }

    function choice_load(){
        choice0.value = "Choice 0";
        choice1.value = "Choice 1";
        choice2.value = "Choice 2";
    }

    document.getElementById("prompt").onkeydown = function prompt_keydown(evt){
        if(choice_mode){
            evt.preventDefault();
            if(evt.keyCode == 38){ // UP
                evt.preventDefault();
                choice_select((choice_index > 0) ? (choice_index - 1) : 2);
            }
            if(evt.keyCode == 40){ // DOWN
                evt.preventDefault();
                choice_select((choice_index < 2) ? (choice_index + 1) : 0);
            }
            if(evt.keyCode == 13){ // RETURN
                document.getElementById("prompt").value += choice_text();
                choice_mode = 0;
                choice_select(-1);
                choice_clear();
            }
            if(evt.keyCode == 27){ // ESC
                choice_mode = 0;
                choice_select(-1);
                choice_clear();
            }
        }
        else{
            if(evt.keyCode == 9){ // TAB
                evt.preventDefault();
                choice_mode = 1;
                choice_load();
                choice_select(0);
            }
        }
    }
</script>

</body>
</html> 
