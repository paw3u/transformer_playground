<!DOCTYPE html>
<html>
<head>
<title>Transformer autocomplete playground</title>
</head>
<body>
<div id="main" align="center">
<p>TAB: GENERATE | ARROWS: SELECT | ENTER: CHOOSE | ESC: ABORT</p>
<textarea name="text" id="prompt" style="width:600px; height:400px;">
The cat was playing in the garden.
</textarea><br>
<input type="text" id="choice0" value="Choice 0" style="width:600px; border:0px;" readonly><br>
<input type="text" id="choice1" value="Choice 1" style="width:600px; border:0px;" readonly><br>
<input type="text" id="choice2" value="Choice 2" style="width:600px; border:0px;" readonly><br>
</div>

<script>
    choice_mode = 0;
    choice_index = -1;
    choice0 = document.getElementById("choice0");
    choice1 = document.getElementById("choice1");
    choice2 = document.getElementById("choice2");

    function choice_select(index){
        choice_index = index
        if(choice_index == 0) choice0.style.backgroundColor = "LightGray"; else choice0.style.backgroundColor = "White";
        if(choice_index == 1) choice1.style.backgroundColor = "LightGray"; else choice1.style.backgroundColor = "White";
        if(choice_index == 2) choice2.style.backgroundColor = "LightGray"; else choice2.style.backgroundColor = "White";
    }

    function choice_text(){
        if(choice_index == 0) return choice0.value;
        if(choice_index == 1) return choice1.value;
        if(choice_index == 2) return choice2.value;
    }

    function choice_clear(){
        choice0.value = "";
        choice1.value = "";
        choice2.value = "";
    }

    function choice_load(){
        choice0.value = "Choice 0";
        choice1.value = "Choice 1";
        choice2.value = "Choice 2";
    }

    document.getElementById("prompt").onkeydown = function prompt_keydown(evt){
        if(choice_mode){
            evt.preventDefault();
            if(evt.keyCode == 38){ // UP
                evt.preventDefault();
                choice_select((choice_index > 0) ? (choice_index - 1) : 2);
            }
            if(evt.keyCode == 40){ // DOWN
                evt.preventDefault();
                choice_select((choice_index < 2) ? (choice_index + 1) : 0);
            }
            if(evt.keyCode == 13){ // RETURN
                document.getElementById("prompt").value += choice_text();
                choice_mode = 0;
                choice_select(-1);
                choice_clear();
            }
            if(evt.keyCode == 27){ // ESC
                choice_mode = 0;
                choice_select(-1);
                choice_clear();
            }
        }
        else{
            if(evt.keyCode == 9){ // TAB
                evt.preventDefault();
                choice_mode = 1;
                choice_load();
                choice_select(0);
            }
        }
    }
</script>

</body>
</html> 